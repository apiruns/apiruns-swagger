from apiruns_swagger.swagger.adapters import TransFormOpenApi3

class TestTransForms:
    
    tranform = TransFormOpenApi3()
    
    def test_execute(self, schema):
        """Test """
        expected = {'openapi': '3.0.3', 'info': {'title': 'Swagger doc - OpenAPI 3.0', 'version': '1.0.11'}, 'servers': [{'url': 'http://localhost:8080'}], 'paths': {'/users': {'get': {'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'post': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'username': {'type': 'string'}, 'age': {'type': 'integer'}, 'is_admin': {'type': 'boolean'}, 'level': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'put': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'username': {'type': 'string'}, 'age': {'type': 'integer'}, 'is_admin': {'type': 'boolean'}, 'level': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'patch': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'username': {'type': 'string'}, 'age': {'type': 'integer'}, 'is_admin': {'type': 'boolean'}, 'level': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'delete': {'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}}, '/rafa': {'get': {'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'post': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'name': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'put': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'name': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'patch': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'name': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'delete': {'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}}, '/pepito': {'get': {'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'post': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'name': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'put': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'name': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'patch': {'requestBody': {'content': {'application/json': {'schema': {'type': 'object', 'properties': {'name': {'type': 'string'}}}}}}, 'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}, 'delete': {'responses': {'200': {'description': 'Successful operation', 'content': {'application/json': {'schema': {'properties': {'id': {'type': 'integer', 'format': 'int64', 'example': 10}}}}}}}}}}}
        specification = self.tranform.execute(schema)
        assert expected == specification
