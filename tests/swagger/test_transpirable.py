from apiruns_swagger.transpirables import json_to_yaml


def test_json_to_yaml(schema):
    expected = "info:\n  title: Swagger doc - OpenAPI 3.0\n  version: 1.0.11\nopenapi: 3.0.3\npaths:\n  /pepito:\n    delete:\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    get:\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    patch:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                name:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    post:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                name:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    put:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                name:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n  /rafa:\n    delete:\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    get:\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    patch:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                name:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    post:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                name:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    put:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                name:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n  /users:\n    delete:\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    get:\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    patch:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                age:\n                  type: integer\n                is_admin:\n                  type: boolean\n                level:\n                  type: string\n                username:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    post:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                age:\n                  type: integer\n                is_admin:\n                  type: boolean\n                level:\n                  type: string\n                username:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\n    put:\n      requestBody:\n        content:\n          application/json:\n            schema:\n              properties:\n                age:\n                  type: integer\n                is_admin:\n                  type: boolean\n                level:\n                  type: string\n                username:\n                  type: string\n              type: object\n      responses:\n        '200':\n          content:\n            application/json:\n              schema:\n                properties:\n                  id:\n                    example: 10\n                    format: int64\n                    type: integer\n          description: Successful operation\nservers:\n- url: http://localhost:8080\n"
    specification = json_to_yaml(schema)
    assert expected == specification 